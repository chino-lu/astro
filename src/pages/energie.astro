---
import { Image } from 'astro:assets';
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Content from '~/components/widgets/Content.astro';
import Features3 from '~/components/widgets/Features3.astro';

// Bilder importieren (Sicherste Methode gegen 404)
import energieMainImg from '~/assets/images/energie_main.png';
import energieConnectedImg from '~/assets/images/energie_connected.png';

const metadata = {
  title: 'Energie-Optimierung — HomeIQ',
  description: 'Maximiere deine Eigenverbrauchsquote durch intelligente Steuerung von PV, Speicher und E-Auto.',
};
---

<Layout metadata={metadata}>
  <Hero
    tagline="Energie-Management"
    title="Dein Haus als <span class='text-accent'>eigenes Kraftwerk</span>"
    subtitle="Wir vernetzen deine Energieerzeuger mit deinen Verbrauchern. Intelligent, automatisch und hocheffizient."
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 overflow-hidden">
        <Image 
          src={energieMainImg} 
          alt="Smart Home Energy Background" 
          class="w-full h-full object-cover opacity-40" 
          widths={[400, 900, 1920]}
          layout="full-width"
        />
        <div class="absolute inset-0 bg-gradient-to-b from-slate-900 via-transparent to-slate-900"></div>
        <div class="absolute inset-x-0 bottom-0 h-40 bg-slate-900 blur-2xl opacity-90 translate-y-20"></div>
      </div>
    </Fragment>
  </Hero>

  <Content
    isReversed
    items={[
      {
        title: 'PV-Überschussladen',
        description: 'Lade dein E-Auto nur dann, wenn deine Solaranlage mehr Strom produziert, als dein Haus verbraucht.',
        icon: 'tabler:charging-pile',
      },
      {
        title: 'Wärmepumpen-Steuerung',
        description: 'Erhöhe die Vorlauftemperatur bei Sonnenüberschuss, um Energie für die Nacht zu "lagern".',
        icon: 'tabler:temperature',
      },
      {
        title: 'Speichermanagement',
        description: 'Intelligente Strategien verhindern, dass dein Speicher bei hohen Strompreisen leer ist.',
        icon: 'tabler:battery-automotive',
      },
    ]}
    image={{
      src: energieConnectedImg, // Auch hier das importierte Bild nutzen
      alt: 'Smart Energy Dashboard',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2 text-balance">
        Smarte Sektorenkopplung
      </h3>
      Wir bringen Photovoltaik, Heizung und Mobilität in Einklang.
    </Fragment>
  </Content>

  <Features2
    title="Intelligente Energie-Steuerung"
    subtitle="Wir machen Schluss mit Rätselraten. Dein Haus steuert den Verbrauch aktiv nach dem Stand der Sonne."
    items={[
      {
        title: 'Energie-Cockpit',
        description: 'Behalte den Überblick über Photovoltaik, Speicher und Hausverbrauch – alles in einer nahtlosen Oberfläche.',
        icon: 'ph:gauge',
      },
      {
        title: 'Stromfresser-Detektiv',
        description: 'Entlarve Standby-Sünder und alte Geräte durch detaillierte Echtzeit-Messung jedes einzelnen Stromkreises.',
        icon: 'ph:magnifying-glass-plus',
      },
      {
        title: 'Sonne ernten',
        description: 'Nutze Überschüsse intelligent: Dein Haus lädt das E-Auto oder heizt den Warmwasserspeicher erst, wenn genug Gratis-Strom vom Dach kommt.',
        icon: 'ph:sun-horizon',
      },
    ]}
  />

  <div class="max-w-7xl mx-auto px-4 py-20">
    <div class="relative rounded-3xl overflow-hidden bg-amber-600 dark:bg-amber-700 shadow-2xl">
      <div class="absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-amber-500 rounded-full opacity-20"></div>
      
      <div class="relative flex flex-col md:flex-row items-center justify-between p-10 md:p-16 gap-8">
        <div class="text-white text-center md:text-left">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">Energieverbrauch senken?</h2>
          <p class="text-amber-100 text-lg max-w-md">
            Optimiere dein Energiemanagement und nutze Ressourcen intelligent. Ich zeige dir, wie dein Smart Home aktiv Kosten spart.
          </p>
        </div>
        <a 
          href="/kontakt" 
          class="bg-white text-amber-700 hover:bg-gray-100 px-8 py-4 rounded-xl font-bold text-lg transition-all transform hover:scale-105 shadow-lg flex items-center gap-2"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"></path>
          </svg>
          Energie-Check buchen
        </a>
      </div>
    </div>
  </div>
</Layout>