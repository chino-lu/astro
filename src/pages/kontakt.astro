---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';

const metadata = { title: 'Kontakt ‚Äî HomeIQ' };
---

<Layout metadata={metadata}>
  <Hero tagline="Letz go!" class="pb-0">
    <Fragment slot="title">
      Bereit f√ºr dein <span class="text-accent">Zuhause der Zukunft?</span>
    </Fragment>
    <Fragment slot="subtitle">
      Schluss mit Standard. Wir planen f√ºr dich ein System, das mitdenkt. Lass uns gemeinsam dein Projekt zum Leben erwecken! üöÄ
    </Fragment>
  </Hero>

  <section class="px-4 pt-0 pb-12 -mt-12 md:-mt-20 relative z-10 max-w-4xl mx-auto">
    <div class="bg-white dark:bg-slate-900 p-8 md:p-12 rounded-[2.5rem] shadow-2xl border border-slate-100 dark:border-slate-800">
      <div class="mb-10 text-center">
        <h2 class="text-3xl font-extrabold mb-3 dark:text-white tracking-tight">Schreib uns eine Nachricht</h2>
        <p class="text-slate-500 dark:text-slate-400 font-medium">Wir melden uns innerhalb von 24 Stunden bei dir.</p>
      </div>

      <form action="https://formspree.io/f/mojjdblw" method="POST" class="space-y-6">
        <div>
          <label for="name" class="block text-sm font-bold uppercase tracking-widest mb-2 text-slate-400 dark:text-slate-500">Name</label>
          <input type="text" name="name" id="name" required placeholder="Dein Name" class="w-full py-4 px-5 rounded-2xl border-2 border-slate-100 dark:border-slate-700 dark:bg-slate-800 focus:border-blue-600 outline-none transition-all placeholder:text-slate-300" />
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="email" class="block text-sm font-bold uppercase tracking-widest mb-2 text-slate-400 dark:text-slate-500">E-Mail</label>
            <input type="email" name="_replyto" id="email" required placeholder="mail@beispiel.lu" class="w-full py-4 px-5 rounded-2xl border-2 border-slate-100 dark:border-slate-700 dark:bg-slate-800 focus:border-blue-600 outline-none transition-all placeholder:text-slate-300" />
          </div>
          <div>
            <label for="tel" class="block text-sm font-bold uppercase tracking-widest mb-2 text-slate-400 dark:text-slate-500">Telefon (Optional)</label>
            <input type="tel" name="phone" id="tel" placeholder="+352..." class="w-full py-4 px-5 rounded-2xl border-2 border-slate-100 dark:border-slate-700 dark:bg-slate-800 focus:border-blue-600 outline-none transition-all placeholder:text-slate-300" />
          </div>
        </div>

        <div>
          <label for="message" class="block text-sm font-bold uppercase tracking-widest mb-2 text-slate-400 dark:text-slate-500">Wie k√∂nnen wir helfen?</label>
          <textarea name="message" id="message" rows="4" required placeholder="Beschreibe kurz dein SmartHome Projekt..." class="w-full py-4 px-5 rounded-2xl border-2 border-slate-100 dark:border-slate-700 dark:bg-slate-800 focus:border-blue-600 outline-none transition-all placeholder:text-slate-300"></textarea>
        </div>
        
        <button type="submit" class="w-full py-5 bg-blue-600 text-white text-xl font-bold rounded-2xl shadow-[0_10px_20px_rgba(37,99,235,0.2)] hover:bg-blue-700 transition-all hover:-translate-y-1 active:scale-95">
          Anfrage jetzt absenden
        </button>
      </form>
    </div>
  </section>

  <section class="px-4 py-16 md:py-24 max-w-4xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-5xl font-extrabold mb-4 dark:text-white tracking-tight">
        Direkt N√§gel mit K√∂pfen?
      </h2>
      <p class="text-lg md:text-xl text-slate-500 dark:text-slate-400 max-w-2xl mx-auto">
        Buche dir dein kostenloses Erstgespr√§ch direkt in meinem Kalender. Einfach Termin w√§hlen und best√§tigen.
      </p>
    </div>

    <div class="bg-white dark:bg-slate-900 rounded-[2.5rem] shadow-2xl border border-slate-100 dark:border-slate-800 p-6 md:p-10 lg:p-12 overflow-hidden min-h-[850px] relative">
      <div class="absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-[80px] -z-10"></div>
      
      <div id="my-cal-inline-introduction" class="w-full h-full mt-4"></div>
    </div>
  </section>
</Layout>

<script type="text/javascript">
  (function (C, A, L) { 
    let p = function (a, ar) { a.q.push(ar); }; 
    let d = C.document; 
    C.Cal = C.Cal || function () { 
      let cal = C.Cal; let ar = arguments; 
      if (!cal.loaded) { 
        cal.ns = {}; cal.q = cal.q || []; 
        d.head.appendChild(d.createElement("script")).src = A; 
        cal.loaded = true; 
      } 
      if (ar[0] === L) { 
        const api = function () { p(api, arguments); }; 
        const namespace = ar[1]; 
        api.q = api.q || []; 
        if(typeof namespace === "string"){
          cal.ns[namespace] = cal.ns[namespace] || api;
          p(cal.ns[namespace], ar);
          p(cal, ["initNamespace", namespace]);
        } else p(cal, ar); 
        return;
      } p(cal, ar); 
    }; 
  })(window, "https://app.cal.com/embed/embed.js", "init");

  Cal("init", "introduction", {origin:"https://app.cal.com"});

  Cal.ns.introduction("inline", {
    elementOrSelector:"#my-cal-inline-introduction",
    config: {"layout":"month_view"},
    calLink: "homeiq/introduction",
  });

  const isDark = document.documentElement.classList.contains('dark');
  
  Cal.ns.introduction("ui", {
    "theme": isDark ? "dark" : "light",
    "hideEventTypeDetails": true,
    "layout": "month_view",
    "styles": {
      "branding": {
        "brandColor": "#2563eb" 
      }
    }
  });
</script>

<style>
  #my-cal-inline-introduction iframe {
    min-height: 750px !important;
  }
</style>